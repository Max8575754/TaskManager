{% extends 'base.html' %}

{% block content %}

<div class="container mt-4">
  <!-- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∑–∞–≤–¥–∞–Ω–Ω—è -->
  <div class="card bg-dark text-light shadow-lg mb-4">
    <div class="card-body">
      <h2 class="card-title">{{ task.title }}</h2>
      <p class="card-text">{{ task.description }}</p>
      <p>
        <strong>–°—Ç–∞—Ç—É—Å:</strong>
        <span class="badge bg-info text-dark">{{ task.status }}</span>
      </p>
      <p>
        <strong>–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:</strong>
        <span class="badge bg-secondary">{{ task.priority }}</span>
      </p>
    </div>
  </div>

  <!-- –î–æ–¥–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä -->
  <div class="card bg-dark text-light shadow-lg mb-4">
    <div class="card-header bg-primary text-white">
      ‚ûï –î–æ–¥–∞—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä
    </div>
    <div class="card-body">
      <form method="post" class="mb-0">
        {% csrf_token %}
        {{ comment_form.as_p }}
        <button type="submit" class="btn btn-success">
          üí¨ –ù–∞–¥—ñ—Å–ª–∞—Ç–∏
        </button>
      </form>
    </div>
  </div>

  <!-- –°–ø–∏—Å–æ–∫ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ -->
  <div class="card bg-dark text-light shadow-lg">
    <div class="card-header bg-secondary text-white">
      üìù –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ
    </div>
    <div class="card-body">
      {% if task.comments.all %}
        <ul class="list-group list-group-flush">
          {% for comment in task.comments.all %}
            <li class="list-group-item bg-dark text-light border-secondary">
              <div class="d-flex justify-content-between">
                <strong>{{ comment.author }}</strong>
                <small class="text-muted">{{ comment.created_at }}</small>
              </div>
              <p class="mb-2">{{ comment.content }}</p>

              {% if user == comment.author %}
                <a href="{% url 'comment-edit' comment.pk %}" class="btn btn-warning btn-sm">‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞—Ç–∏</a>
                <a href="{% url 'comment-delete' comment.pk %}" class="btn btn-danger btn-sm">üóë –í–∏–¥–∞–ª–∏—Ç–∏</a>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="text-muted">–ö–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ –ø–æ–∫–∏ –Ω–µ–º–∞—î.</p>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}
